<!-- layout.html -->
<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>agentscope.prompt._prompt_generator_en &mdash; AgentScope  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=c9484b72" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="https://unpkg.com/mermaid@10.2.0/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" > 

          
          
          <a href="../../../index.html" class="icon icon-home">
            AgentScope
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div> <!-- language_selector.html -->
<div class="language-selector">
    <a href="../../../../en/_modules/agentscope/prompt/_prompt_generator_en.html">English</a></li> |
    <a href="../../../../zh_CN/_modules/agentscope/prompt/_prompt_generator_en.html">中文</a></li>
</div> 
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">AgentScope Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/101-agentscope.html">About AgentScope</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/102-installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/103-example.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/203-model.html">Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/203-stream.html">Streaming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/206-prompt.html">Prompt Engineering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/201-agent.html">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/205-memory.html">Memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/203-parser.html">Response Parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/209-prompt_opt.html">System Prompt Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/204-service.html">Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/202-pipeline.html">Pipeline and MsgHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/208-distribute.html">Distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/209-gui.html">AgentScope Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/210-rag.html">A Quick Introduction to RAG in AgentScope</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/105-logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/207-monitor.html">Monitor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/104-usecase.html">Example: Werewolf Game</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/contribute.html">Get Involved</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AgentScope API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../agentscope.html">agentscope package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../agentscope.message.html">agentscope.message package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../agentscope.models.html">agentscope.models package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../agentscope.agents.html">agentscope.agents package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../agentscope.memory.html">agentscope.memory package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../agentscope.parsers.html">agentscope.parsers package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../agentscope.exception.html">agentscope.exception module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../agentscope.pipelines.html">agentscope.pipelines package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../agentscope.service.html">agentscope.service package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../agentscope.rpc.html">agentscope.rpc package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../agentscope.server.html">agentscope.server package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../agentscope.web.html">agentscope.web package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../agentscope.prompt.html">agentscope.prompt package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../agentscope.utils.html">agentscope.utils package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">AgentScope</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">agentscope.prompt._prompt_generator_en</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for agentscope.prompt._prompt_generator_en</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;Prompt generator class.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Literal</span><span class="p">,</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">._prompt_generator_base</span> <span class="kn">import</span> <span class="n">SystemPromptGeneratorBase</span>
<span class="kn">from</span> <span class="nn">._prompt_utils</span> <span class="kn">import</span> <span class="n">_DEFAULT_EXAMPLE_LIST_EN</span>


<span class="n">_DEFAULT_META_PROMPT_EN</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">You are an expert in writing and optimizing system prompts. Your task is to enhance the system prompt provided by the user, ensuring the enhanced prompt includes a description of the agent&#39;s role or personality, the agent&#39;s skill points, and some constraints.</span>

<span class="s2">## Note</span>
<span class="s2">1. The optimized system prompt must align with the user&#39;s original prompt intent. You may add callable tools, specific keywords, time frames, context, or any additional information to narrow the scope and guide the agent better in completing the task. Reconstruct the user&#39;s prompt as necessary.</span>
<span class="s2">2. The role and skill point descriptions should not narrow the scope defined by the user&#39;s original prompt.</span>
<span class="s2">3. Skill point descriptions should be as detailed and accurate as possible. If the user&#39;s original prompt includes examples, ensure skill points cover these cases but are not limited to them. For instance, if the original prompt mentions an &quot;exam question generating robot&quot; that can create fill-in-the-blank questions as an example, the skill points in the optimized prompt should include creating exam questions but not be limited to fill-in-the-blank questions.</span>
<span class="s2">4. Skill scope should not exceed the large model&#39;s capabilities. If it does, specify the tools or knowledge bases needed to endow the model with this skill. For example, since the large model lacks search function, invoke a search tool if searching is required.</span>
<span class="s2">5. Output the optimized prompt in markdown format.</span>
<span class="s2">6. The prompt must be concise, within 1000 words.</span>
<span class="s2">7. Retain the knowledge base or memory section in the optimized prompt if the user&#39;s provided prompt includes these.</span>
<span class="s2">8. If the prompt contains variables like ${{variable}}, ensure the variable appears only once in the optimized prompt. In subsequent references, use the variable name directly without enclosing it in $</span><span class="si">{}</span><span class="s2">.</span>
<span class="s2">9. The language of the optimized prompt should match the user&#39;s original prompt: If the user provides the prompt in Chinese, optimize in Chinese; if in English, optimize in English.</span>
<span class="s2">&quot;&quot;&quot;</span>  <span class="c1"># noqa</span>

<span class="n">_DEFAULT_EXAMPLE_PROMPT_TEMPLATE_EN</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;## Example </span><span class="si">{index}</span>
<span class="s2">- User&#39;s Input:</span>
<span class="s2">```</span>
<span class="si">{user_prompt}</span>
<span class="s2">```</span>

<span class="s2">- Optimized system prompt:</span>
<span class="s2">```</span>
<span class="si">{opt_prompt}</span>
<span class="s2">```</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">_DEFAULT_RESPONSE_PROMPT_TEMPLATE_EN</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;## User&#39;s Input</span>
<span class="s2">```</span>
<span class="si">{user_prompt}</span>
<span class="s2">```</span>

<span class="s2">## Optimized System Prompt</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="c1"># The name of the default local embedding model, which is used when</span>
<span class="c1"># `embed_model_config_name` is not provided.</span>
<span class="n">_DEFAULT_LOCAL_EMBEDDING_MODEL</span> <span class="o">=</span> <span class="s2">&quot;sentence-transformers/all-mpnet-base-v2&quot;</span>


<div class="viewcode-block" id="EnglishSystemPromptGenerator">
<a class="viewcode-back" href="../../../agentscope.prompt.html#agentscope.prompt.EnglishSystemPromptGenerator">[docs]</a>
<span class="k">class</span> <span class="nc">EnglishSystemPromptGenerator</span><span class="p">(</span><span class="n">SystemPromptGeneratorBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Optimize the users&#39; system prompt with the given meta prompt and</span>
<span class="sd">    examples if provided.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="EnglishSystemPromptGenerator.__init__">
<a class="viewcode-back" href="../../../agentscope.prompt.html#agentscope.prompt.EnglishSystemPromptGenerator.__init__">[docs]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">model_config_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">meta_prompt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">_DEFAULT_META_PROMPT_EN</span><span class="p">,</span>
        <span class="n">response_prompt_template</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">_DEFAULT_RESPONSE_PROMPT_TEMPLATE_EN</span><span class="p">,</span>
        <span class="n">example_num</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">example_list</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="n">_DEFAULT_EXAMPLE_LIST_EN</span><span class="p">,</span>
        <span class="n">example_selection_strategy</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;random&quot;</span><span class="p">,</span> <span class="s2">&quot;similarity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;random&quot;</span><span class="p">,</span>
        <span class="n">example_prompt_template</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">_DEFAULT_EXAMPLE_PROMPT_TEMPLATE_EN</span><span class="p">,</span>
        <span class="n">embed_model_config_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">local_embedding_model</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">_DEFAULT_LOCAL_EMBEDDING_MODEL</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">model_config_name</span><span class="o">=</span><span class="n">model_config_name</span><span class="p">,</span>
            <span class="n">meta_prompt</span><span class="o">=</span><span class="n">meta_prompt</span><span class="p">,</span>
            <span class="n">response_prompt_template</span><span class="o">=</span><span class="n">response_prompt_template</span><span class="p">,</span>
            <span class="n">example_num</span><span class="o">=</span><span class="n">example_num</span><span class="p">,</span>
            <span class="n">example_list</span><span class="o">=</span><span class="n">example_list</span><span class="p">,</span>
            <span class="n">example_selection_strategy</span><span class="o">=</span><span class="n">example_selection_strategy</span><span class="p">,</span>
            <span class="n">example_prompt_template</span><span class="o">=</span><span class="n">example_prompt_template</span><span class="p">,</span>
            <span class="n">embed_model_config_name</span><span class="o">=</span><span class="n">embed_model_config_name</span><span class="p">,</span>
            <span class="n">local_embedding_model</span><span class="o">=</span><span class="n">local_embedding_model</span><span class="p">,</span>
        <span class="p">)</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Alibaba Tongyi Lab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>